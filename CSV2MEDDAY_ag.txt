#!/bin/bash

# Check if directories exist, make directories if does not exist
![ -d "/mnt/c/Users/Alexis Garduno/Dropbox/Data/MedDay"] && mkdir -p "/mnt/c/Users/Alexis Garduno/Dropbox/Data/MedDay"
![ -d "/mnt/c/Users/Alexis Garduno/Dropbox/Commands"] && mkdir -p "/mnt/c/Users/Alexis Garduno/Dropbox/Commands"

# Set file paths
DATACSV=/mnt/c/Users/Alexis Garduno/Dropbox/WHI_RAR_Accelerometry/DATACSV
DATAMEDDAY=/mnt/c/Users/Alexis Garduno/Dropbox/Data/MedDay
DATACOMM=/mnt/c/Users/Alexis Garduno/Dropbox/Commands
CODEUKBB=/mnt/c/Users/Alexis Garduno/Dropbox/WHI_RAR_Accelerometry/GitHub

# Export environment variables
export DATACSV
export DATACOMM
export CODEUKBB
export DATAMEDDAY

# Make sure directories exist
mkdir -p $DATACSV
mkdir -p $DATACOMM
mkdir -p $DATAMEDDAY

# Generate input files 
cd $DATACOMM
python3 $CODEUKBB/chunkMedDay.py

# 
cd $CODEUKBB
for FILE in $DATACOMM/inputMedDay_*.txt; do
    echo ${FILE}
    export FILE
    bash $CODEUKBB/runMedDay.txt #runoutside the cluster
done
